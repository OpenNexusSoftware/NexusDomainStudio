{
    "id": "create_user",
    "name": "CreateUser",
    "description": "Create a new user account and profile",
    "factory": true,
    "preconditions": [],
    "args": [
        { "name": "firstName", "type": "string", "description": "First name of the user", "required": true },
        { "name": "middleName", "type": "string", "description": "Middle name of the user", "required": false },
        { "name": "lastName", "type": "string", "description": "Last name of the user", "required": true },
        { "name": "email", "type": "string", "description": "Email address of the user", "required": true },
        { "name": "role", "type": "UserRole", "description": "Role assigned to the user", "required": true },
        { "name": "authId", "type": "string", "description": "Authentication identifier for the user", "required": false }
    ],
    "post": [
        { "property": "id", "value": "guid.new"},
        { "property": "profile.name.firstName", "value": "$args.firstName"},
        { "property": "profile.name.middleName", "value": "$args.middleName" },
        { "property": "profile.name.lastName", "value": "$args.lastName" },
        { "property": "email", "value": "$args.email" },
        { "property": "role", "value": "$args.role" },
        { "property": "authId", "value": "$args.authId" },
        { "property": "status", "value": "active" },
        { "property": "createdAt", "value": "dateTime.now" },
        { "property": "updatedAt", "value": "null" }
    ],
    "emits": [
        { 
            "event": "user_created", 
            "description": "Emits when a new user account is created",
            "maps": [
                { "property": "userId", "value": "$this.id" },
                { "property": "createdAt", "value": "$this.createdAt" }
            ]
        }
    ]
}
